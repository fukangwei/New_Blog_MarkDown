---
title: 压缩和解压文件
date: 2019-02-02 15:15:02
tags:
---
### tar.xz格式

&emsp;&emsp;`xz`压缩是最新的压缩率之王，它是绝大数`linux`默认自带的一个压缩工具。`xz`的坏处就是压缩时间比较长，比`7z`压缩时间还长一些。
&emsp;&emsp;`xz`压缩文件的方法：

``` bash
xz -z 文件
```

如果要保留被压缩的文件，加上参数`-k`；如果要设置压缩率，使用参数`-0`至`-9`，默认压缩等级是`6`。
&emsp;&emsp;`xz`解压文件的方法：

``` bash
xz -d 文件
```

同样使用参数`-k`来保留被解压缩的文件。
&emsp;&emsp;创建`tar.xz`文件：

``` bash
tar cvf xxx.tar xxx/ # 创建xxx.tar文件，
xz -z xxx.tar  # 将xxx.tar压缩为xxx.tar.xz。
```

&emsp;&emsp;解压`tar.xz`文件：

``` bash
xz -d xxx.tar.xz  # 将xxx.tar.xz解压成xxx.tar
tar xvf xxx.tar  # 将xxx.tar解包
```

### tar格式

&emsp;&emsp;相关的参数如下：

参数  | 说明
-----|-----
`-c` | 建立压缩档案
`-x` | 解压
`-t` | 查看内容
`-r` | 向压缩归档文件末尾追加文件
`-u` | 更新原压缩包中的文件

这五个是独立的命令，压缩解压都要用到其中一个，可以和别的命令连用但只能用其中一个。下面的参数是根据需要在压缩或解压档案时可选的：

参数 | 说明
-----|----
`-z` | `gzip`属性
`-j` | `bz2`属性
`-Z` | `compress`属性
`-v` | 显示所有过程

下面的参数`-f`是必须的，`-f`意思是使用档案名字，切记这个参数是最后一个参数，后面只能接档案名：

``` bash
tar -cf all.tar *.jpg     # 将所有“.jpg”的文件打包为“all.tar”
tar -rf all.tar *.gif     # 将所有“.gif”的文件增加到“all.tar”里面
tar -uf all.tar logo.gif  # 更新原来“all.tar”中的“logo.gif”文件
tar -tf all.tar           # 列出“all.tar”包中所有文件
tar -xf all.tar           # 解出all.tar包中所有文件
```

压缩命令如下：

``` bash
tar -cvf jpg.tar *.jpg      # 将目录里所有jpg文件打包成“tar.jpg”。
tar -czf jpg.tar.gz *.jpg   # 将目录里所有jpg文件打包成“jpg.tar”后，并且将其用gzip压缩
tar -cjf jpg.tar.bz2 *.jpg  # 将目录里所有jpg文件打包成“jpg.tar”后，并且将其用bzip2压缩
tar -cZf jpg.tar.Z *.jpg    # 将目录里所有jpg文件打包成“jpg.tar”后，并且将其用compress压缩
```

解压命令如下：

``` bash
tar -xvf file.tar       # 解压tar包
tar -xzvf file.tar.gz   # 解压“tar.gz”包
tar -xjvf file.tar.bz2  # 解压“tar.bz2”包
tar -xZvf file.tar.Z    # 解压“tar.Z”包
```

---

### rar格式

&emsp;&emsp;`rar`解压工具安装命令：

``` bash
sudo apt-get install unrar
```

常用命令如下：

- `e`：将文件解压到当前目录，例如`rar e test.rar`。用e解压的话，不仅原来的`file1.txt`和`file2.txt`被解压到当前目录，就连`dir1`里面的所有文件也被解压到当前目录下，不能保持压缩前的目录结构。如果想保持压缩前的目录结构，用`x`解压。
- `x`：带路径解压文档中内容到当前目录，例如`rar x test.rar`。这样解压的话，就会保持原来的目录结构。
- `a`：添加文件到操作文档，例如`rar a test.rar file1.txt`。若`test.rar`文件不存在，则打包`file1.txt`文件成`test.rar`；若`test.rar`文件已经存在，则添加该文件到`test.rar`中。如果操作文档中已有某文件的一份拷贝，则`a`命令更新该文件，对目录也可以进行操作，例如`rar a test.rar dir1`。
- `c`：对操作文档添加说明注释，例如`rar c test.rar`，会出现`Reading comment from stdin`字样，然后输入一行或多行注释，以`Ctrl + d`结束。
- `cf`：添加文件注释，类似上面的`c`，不过这个是对压缩文档中每个文件进行注释。
- `cw`：将文档注释写入文件，例如`rar cw test.rar comment.txt`。
- `d`：从文档中删除文件，例如`rar d test.rar file1.txt`。
- `k`：锁定文档，例如`rar k test.rar`。锁定文档后，该文档就无法进行任何更新操作。
- `r`：修复文档，例如`rar r test.rar`。当`rar`文件有问题时，可以尝试用该命令进行修复。
- `s`：转换文档成自解压文档，例如`rar s test.rar`，会生成一个`test.sfx`的可执行文档，运行它的效果就相当于`rar x test.rar`，适合于向没有`rar`的用户传输文件。
- `t`：检测文档，例如`rar t test.rar`，检测`test.rar`的完整性，一般压缩完大型文件准备传输前，最好用这个命令来确保文件的正确性。

---

### zip格式

&emsp;&emsp;把`mydata`目录压缩为`mydata.zip`：

``` bash
zip -r mydata.zip mydata
```

&emsp;&emsp;把`mydata.zip`解压到`mydatabak`目录：

``` bash
unzip mydata.zip -d mydatabak
```

&emsp;&emsp;把`abc`文件夹和`123.txt`压缩成为`abc123.zip`：

``` bash
zip -r abc123.zip abc 123.txt
```

&emsp;&emsp;把`wwwroot.zip`直接解压到当前目录：

``` bash
unzip wwwroot.zip
```

&emsp;&emsp;把`abc12.zip`、`abc23.zip`、`abc34.zip`同时解压到当前目录：

``` bash
unzip abc\*.zip
```

&emsp;&emsp;查看`wwwroot.zip`里面的内容：

``` bash
unzip -v wwwroot.zip
```

&emsp;&emsp;验证`wwwroot.zip`是否完整：

``` bash
unzip -t wwwroot.zip
```

---

### 7z格式

&emsp;&emsp;`ubuntu`安装`7z`压缩与解压工具：

``` bash
sudo apt-get install p7zip-full
```

解压`7z`文件使用如下命令：

``` bash
7z(或7za) x filename.7z
```