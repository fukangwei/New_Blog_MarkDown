---
title: Shell之test命令
categories: Shell编程
abbrlink: 5322394e
date: 2019-01-19 20:40:01
---
&emsp;&emsp;`shell`中的`test`命令用于检查某个条件是否成立，它可以进行数值、字符和文件三个方面的测试。<!--more-->

### 数值测试

参数  | 说明
------|-------
`-eq` | 等于则为真
`-ne` | 不等于则为真
`-gt` | 大于则为真
`-ge` | 大于等于则为真
`-lt` | 小于则为真
`-le` | 小于等于则为真

``` bash
#!/bin/bash
​
num1=100
num2=100
if test $[num1] -eq $[num2]
then
    echo '两个数相等!'
else
    echo '两个数不相等!'
fi
```

执行结果是`两个数相等!`。

### 字符串测试

参数       | 说明
-----------|----
`=`        | 等于则为真
`!=`       | 不相等则为真
`-z 字符串` | 字符串的长度为零则为真
`-n 字符串` | 字符串的长度不为零则为真

注意，在条件测试中，以上符号的左右两边都要有空格。

``` bash
#!/bin/bash
​
num1="ru1noob"
num2="runoob"
if test $num1 = $num2
then
    echo '两个字符串相等!'
else
    echo '两个字符串不相等!'
fi
```

执行结果是`两个字符串不相等!`。

### 文件测试

参数        | 说明
-----------|------------
`-e 文件名` | 如果文件存在则为真
`-r 文件名` | 如果文件存在且可读则为真
`-w 文件名` | 如果文件存在且可写则为真
`-x 文件名` | 如果文件存在且可执行则为真
`-s 文件名` | 如果文件存在且至少有一个字符则为真
`-d 文件名` | 如果文件存在且为目录则为真
`-f 文件名` | 如果文件存在且为普通文件则为真
`-c 文件名` | 如果文件存在且为字符型特殊文件则为真
`-b 文件名` | 如果文件存在且为块特殊文件则为真
`-a 文件名` | 类似于`-e`
`-L 文件名` | 如果文件存在且为符号链接则为真

``` bash
#!/bin/bash
​
cd /bin
if test -e ./bash
then
    echo '文件已存在!'
else
    echo '文件不存在!'
fi
```

执行结果为`文件已存在!`。
&emsp;&emsp;另外，`Shell`还提供了与`-a`、或`-o`、非`!`三个逻辑操作符用于将测试条件连接起来，其优先级为：`!`最高，`-a`次之，`-o`最低。

``` bash
#!/bin/bash
​
cd /bin
if test -e ./notFile -o -e ./bash
then
    echo '有一个文件存在!'
else
    echo '两个文件都不存在'
fi
```

执行结果是`有一个文件存在!`。