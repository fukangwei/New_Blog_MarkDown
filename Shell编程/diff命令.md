---
title: diff命令
date: 2019-01-20 19:38:28
categories: Shell编程
---
&emsp;&emsp;`diff`用于比较文件的内容，特别是比较两个版本不同的文件以找到改动的地方。`diff`在命令行中打印每一个行的改动，最新版本的`diff`还支持二进制文件。`diff`程序的输出被称为补丁(`patch`)，因为`Linux`系统中还有一个`patch`程序，可以根据`diff`的输出将`a.c`的文件内容更新为`b.c`。`diff`是`svn`、`cvs`、`git`等版本控制工具不可或缺的一部分。

``` bash
diff [参数] [文件1或目录1] [文件2或目录2]
```

`diff`命令能比较单个文件或者目录内容。如果指定比较的是文件，则只有当输入为文本文件时才有效。以逐行的方式，比较文本文件的异同处。如果指定比较的是目录的的时候，`diff`命令会比较两个目录下名字相同的文本文件。列出不同的二进制文件、公共子目录和只在一个目录出现的文件。
&emsp;&emsp;命令参数如下：

参数                             | 说明
---------------------------------|-----
`-`                              | 指定要显示多少行的文本，此参数必须与参数`-c`或`-u`一并使用
`-a`或`--text`                   | `diff`预设只会逐行比较文本文件
`-b`或`--ignore-space-change`    | 不检查空格字符的不同
`-B`或`--ignore-blank-lines`     | 不检查空白行
`-c`                             | 显示全部内文，并标出不同之处
`-C`或`--context`                | 与执行`-c-`指令相同
`-d`或`--minimal`                | 使用不同的演算法，以较小的单位来做比较
`-e`或`--ed`                     | 此参数的输出格式可用于`ed`的`script`文件
`-f`或`-forward-ed`              | 输出的格式类似`ed`的`script`文件，但按照原来文件的顺序来显示不同处
`-H`或`--speed-large-files`      | 比较大文件时，可加快速度
`-l`或`--ignore-matching-lines`  | 若两个文件在某几行有所不同，而这几行同时都包含了选项中指定的字符或字符串，则不显示这两个文件的差异
`-i`或`--ignore-case`            | 不检查大小写的不同
`-l`或`--paginate`               | 将结果交由`pr`程序来分页
`-n`或`--rcs`                    | 将比较结果以`RCS`的格式来显示
`-p`                             | 若比较的文件为`C`语言的程序码文件时，显示差异所在的函数名称
`-q`或`--brief`                  | 仅显示有无差异，不显示详细的信息
`-r`或`--recursive`              | 比较子目录中的文件
`-s`或`--report-identical-files` | 若没有发现任何差异，仍然显示信息
`-S`或`--starting-file`          | 在比较目录时，从指定的文件开始比较
`-t`或`--expand-tabs`            | 在输出时，将`tab`字符展开
`-T`或`--initial-tab`            | 在每行前面加上`tab`字符以便对齐
`-u`、`-U`或`--unified=`         | 以合并的方式来显示文件内容的不同
`-v`或`--version`                | 显示版本信息
`-w`或`--ignore-all-space`       | 忽略全部的空格字符
`-W`或`--width`                  | 在使用`-y`参数时，指定栏宽
`-x`或`--exclude`                | 不比较选项中所指定的文件或目录
`-y`或`--side-by-side`           | 以并列的方式显示文件的异同之处
`--help`                         | 显示帮助
`--left-column`                  | 在使用`-y`参数时，若两个文件某一行内容相同，则仅在左侧的栏位显示该行内容
`--suppress-common-lines`        | 在使用`-y`参数时，仅显示不同之处

&emsp;&emsp;比较两个文件的示例：

``` bash
$ diff log2014.log log2013.log
3c3
< 2014-03
---
> 2013-03
8c8
< 2013-07
---
> 2013-08
11,12d10
< 2013-11
< 2013-12
```

上面的`3c3`和`8c8`表示`log2014.log`和`log20143log`文件在`3`行和第`8`行内容有所不同`11,12d10`表示第一个文件比第二个文件多了第`11`和`12`行。