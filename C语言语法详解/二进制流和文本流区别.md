---
title: 二进制流和文本流区别
categories: C语言语法详解
date: 2018-12-12 05:23:20
---
### 二进制流和文本流

&emsp;&emsp;`C`语言引入了流`stream`的概念，它将数据的输入输出看作是数据的流入和流出，这样不管是磁盘文件或者是物理设备，都可看作一种流的源和目的，对它们的操作就是数据的流入和流出。<!--more-->
&emsp;&emsp;`C`语言中的流可分为两种，即`文本流`和`二进制流`。

- 文本流是指流动的数据是以字符形式出现的。在文本流中，`\n`被换成回车符和换行符的`ASCII`码`0DH`和`0AH`。当输出文本流时，`0DH`和`0AH`则被换成`\n`。
- 二进制流是指流动的数据是二进制数字序列。若二进制流中有字符，则用`ASCII`码表示；若是数字，则用二进制数表示。在二进制流流入流出时，对`\n`符号不进行变换。

&emsp;&emsp;例如对于数字`2001`，在文本流中，用其`ASCII`码表示为：

``` bash
'2' '0' '0' '1'
 |   |   |   |
50  48  48  49
```

一共占用`4`字节。而在二进制流中，则表示为`00000111_11010001`，只占用`2`字节。
&emsp;&emsp;由此看出，二进制流比文本流节省空间，因而：

- 对于含有大量数字信息的流，可以采用二进制流。
- 对于含有大量字符信息的流，可以采用文本流。

### 文本文件与二进制文件

&emsp;&emsp;计算机存储的信息在物理上是二进制的，所以文本文件与二进制文件的区别并不是物理上的，而是逻辑上的，这两者只是在编码层次上有差异：

- 文本文件是基于`字符`编码的文件，常见的编码有`ASCII`码、`UNICODE`码等。
- 二进制文件是基于`值`编码的文件，你可以根据具体应用，指定某个值是什么意思。

&emsp;&emsp;对于文本文件，可以以`txt`文件为例。假设该文件具有文本流`01000000_01000001_01000010_01000011`，其第一个`8`比特`01000000`按`ASCII`码来解码的话，所对应的字符是`A`，其它`3`个`8`比特可分别解码为`BCD`，即这个文本流可解码为`ABCD`。
&emsp;&emsp;对于二进制文件，可以以`bmp`文件为例。`bmp`文件前`2`字节用来说明该文件为`bmp`格式，接下来的`8`个字节用来记录文件长度，再接下来的`4`字节用来记录`bmp`文件头的长度。可以看出来，`bmp`文件的编码是基于值的。