---
title: 堆和栈
categories: C语言语法详解
date: 2018-12-09 18:18:09
---
&emsp;&emsp;由`C/C++`编译的程序占用的内存分为以下几个部分：<!--more-->

- `栈区`：由系统自动分配释放，用于存放函数的参数值、局部变量的值等。
- `堆区`：一般由程序员分配释放。
- `全局区`或`静态区`：全局变量和静态变量的存储是放在一块的。程序结束后由系统释放。
- `文字常量区`：常量字符串就是放在这里的。程序结束后由系统释放。
- `程序代码区`：存放函数体的二进制代码。

&emsp;&emsp;看看下面的例子：

``` cpp
int a = 0; // 全局区
char* p1;  // 全局区

int main ( void ) {
    int b; // 栈区
    char s[] = "abc"; // 栈区
    char* p2; // 栈区
    char* p3 = "123456"; // p3在栈上，字符串“123456\0”在文字常量区
    static int c = 0; // 静态区
    // 分配得来的10和20字节的区域就在堆区
    p1 = ( char* ) malloc ( 10 );
    p2 = ( char* ) malloc ( 20 );
}
```