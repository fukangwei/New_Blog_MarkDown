---
title: 获取处理器生产厂商
categories: Intel汇编
date: 2018-12-16 19:22:51
---
&emsp;&emsp;`cpuid.s`(系统调用版)如下：<!--more-->

``` cpp
# cpuid.s: Sample program to extract the processor Vendor ID
.section .data
output:
    .ascii "The processor Vendor ID is 'xxxxxxxxxxxx'\n"

.section .text
.globl main
main:
    movl $0, %eax
    cpuid

    movl $output, %edi
    movl %ebx, 28(%edi)
    movl %edx, 32(%edi)
    movl %ecx, 36(%edi)

    movl $4, %eax
    movl $1, %ebx
    movl $output, %ecx
    movl $42, %edx
    int $0x80

    movl $1, %eax
    movl $0, %ebx
    int $0x80
```

编译指令：

``` bash
gcc cpuid.s -o cpuid
```

运行结果：

``` bash
The processor Vendor ID is 'GenuineIntel'
```

&emsp;&emsp;`cpuid2.s`(`C`语言库函数版本)如下：

``` cpp
# cpuid2.s: Sample program to extract the processor Vendor ID
.section .data
output:
    .asciz "The processor Vendor ID is '%s'\n"

.section .bss
    .lcomm buffer, 12

.section .text
.globl main
main:
    movl $0, %eax
    cpuid

    movl $buffer, %edi
    movl %ebx, (%edi)
    movl %edx, 4(%edi)
    movl %ecx, 8(%edi)

    pushl $buffer
    pushl $output
    call printf

    addl $8, %esp
    pushl $0
    call exit
```