---
title: 列表
categories: Python语法
abbrlink: 9eaa2eb6
date: 2019-01-10 12:48:07
---
&emsp;&emsp;`Python`的列表比`C`语言的数组更加强大。

### 创建列表

&emsp;&emsp;创建`普通列表`：

``` python
member = ['one', 'two', 'three', 'four']
```

创建`混合列表`：

``` python
mix = [1, 'hello', 3.14, [1, 2, 3]]
```

创建`空列表`：

``` python
empty = []
```

创建`嵌套列表`：嵌套列表是在列表里创建其它列表：

``` python
a = ['a', 'b', 'c']
n = [1, 2, 3]
x = [a, n]
x  # 结果为[['a', 'b', 'c'], [1, 2, 3]]
x[0]  # 结果为['a', 'b', 'c']
x[0][1]  # 结果为“b”
```

### 添加元素

&emsp;&emsp;向列表添加元素，使用`append`：

``` python
# 结果为['one', 'two', 'three', 'four', 'five']
member.append('five')
```

`append`是对象`member`的一个方法，它不能同时添加两个元素到列表中，例如`member.append('six', 'seven')`。如果想同时添加两个元素到列表中，需要用到`extend`方法：

``` python
# 结果为['one', 'two', 'three', 'four', 'five', 'six', 'seven']
member.extend(['six', 'seven'])
```

`append`和`extend`都是默认把元素添加到列表的末尾。要想把元素插到列表的指定位置，需要`insert`方法：

``` python
# 把“zero”插到列表的第0位，结果为['zero', 'one', 'two', 'three', 'four', 'five', 'six', 'seven']
member.insert(0, 'zero')
```

### 获取元素

&emsp;&emsp;和数组一样，我们可以通过元素的索引值(`index`)从列表获取单个元素，注意列表索引值是从`0`开始的：

``` python
member[0]  # 结果为“zero”
member[1]  # 结果为“one”
# 数组元素交换
temp = member[0]
member[0] = member[1]
member[1] = temp
member  # 结果为['one', 'zero', 'two', 'three', 'four', 'five', 'six', 'seven']
```

### 删除元素

&emsp;&emsp;从列表中删除元素，使用`remove`方法：

``` python
# 结果为['one', 'two', 'three', 'four', 'five', 'six', 'seven']
member.remove('zero')
```

或者使用`del`：

``` python
del member[0]  # 删除列表的第0个元素
del member[1]  # 删除列表的第1个元素
del member  # 删除整个列表
```

或者使用`pop`，该方法可以从列表尾弹出一个元素：

``` python
member = ['zero', 'one', 'two', 'three', 'four', 'five', 'six', 'seven']
member.pop()  # 把“seven”从列表中弹出
name = member.pop()  # 把“six”从列表中弹出，并赋值给name
member.pop(1)  # 把member列表中第1个元素即“one”从列表中弹出
member  # 结果为['zero', 'two', 'three', 'four', 'five']
```

### 列表分片

&emsp;&emsp;如果一次性需要从列表中获取多个元素，可以利用列表分片：

``` python
member  # 结果为['zero', 'two', 'three', 'four', 'five']
member[1:3]  # 结果为['two', 'three']
member[:3]  # 结果为['zero', 'two', 'three']
member[1:]  # 结果为['two', 'three', 'four', 'five']
member[:]  # 结果为['zero', 'two', 'three', 'four', 'five']
member2 = member[:]
member2  # 结果为['zero', 'two', 'three', 'four', 'five']
```

注意，`list[1:3]`其实只输出两个变量，即`list`中第二个元素到第三个元素，并不是第`1`、第`2`和第`3`三个元素。

### 列表操作符

&emsp;&emsp;列表的一些常用操作符：比较操作符、逻辑操作符、连接操作符、重复操作符、成员关系操作符。具体应用如下：

``` python
list1 = [123]
list2 = [234]
list1 > list2  # 结果为False
list1 = [123, 456]
list2 = [234, 123]
list1 > list2  # 结果为False。我们发现，比较是从第0个元素开始的
list3 = [123, 456]
(list1 < list2) and (list1 == list3)  # 结果为True
list4 = list1 + list2
list4  # 结果为[123, 456, 234, 123]
list1 + 'hello'  # 结果为“出错”
list3  # 结果为[123, 456]
list3 * 3  # 结果为[123, 456, 123, 456, 123, 456]，list3并未改变
list3 *= 3
list3  # 结果为[123, 456, 123, 456, 123, 456]，list3被改变
```

注意，向列表中添加元素不推荐使用`+`号！
&emsp;&emsp;成员关系操作符的应用：

``` python
list3  # 结果为[123, 456, 123, 456, 123, 456]
123 in list3  # 结果为True
"hello" in list3  # 结果为False
123 not in list3  # 结果为False
list5 = [123, ["one", "two"], 456]
"one" in list5  # 结果为False
"one" in list5[1]  # 结果为True
list5[1][1]  # 结果为“two”，列表中的列表可以与C语言的二维数组联系起来
```

&emsp;&emsp;在终端输入：

``` python
list3  # 得到[123, 456, 123, 456, 123, 456]
list3.count(123)  # 得到3，作用为找出123在列表中的数目
list3.index(123)  # 得到0，作用为找到123在列表中的第1个索引
list3.index(123, 3, 7)  # 得到4，作用为找到123在列表中范围是4到7的索引
list3.reverse()  # 列表反序，结果为[456, 123, 456, 123, 456, 123]
list4 = [4, 5, 7, 1, 3, 8, 9, 0]
list4.sort()  # 对列表按默认的顺序(从小到大)进行排序
list4  # 得到[0, 1, 3, 4, 5, 7, 8, 9]
list4.sort(reverse=True)  # 对列表按反序进行排序
list4  # 结果为[9, 8, 7, 5, 4, 3, 1, 0]
# ------------------------------
list4 = [4, 5, 7, 1, 3, 8, 9, 0]
list4  # 得到[4, 5, 7, 1, 3, 8, 9, 0]
list5 = list4[:]
list5.sort()  # 对list5正向排序
list5  # 得到[0, 1, 3, 4, 5, 7, 8, 9]
list6 = list4
list6  # 得到[4, 5, 7, 1, 3, 8, 9, 0]
list4.sort(reverse=True)  # 对list4反序排序
list4  # 得到[9, 8, 7, 5, 4, 3, 1, 0]
list6  # 得到[9, 8, 7, 5, 4, 3, 1, 0]
```

`list5`是对`list4`的复制；`list6`是指向`list4`，与`list4`共享数据。
&emsp;&emsp;如果列表中的元素是元祖，则排序可以使用`key`关键字：

``` python
a = [('b', 2), ('a', 1), ('c', 0)]
b = sorted(a, key=lambda a_tuple: a_tuple[0])
c = sorted(a, key=lambda a_tuple: a_tuple[1])
print(b)  # 结果为[('a', 1), ('b', 2), ('c', 0)]
print(c)  # 结果为[('c', 0), ('a', 1), ('b', 2)]
```

### Python列表函数和方法

&emsp;&emsp;针对列表，可以使用如下`Python`内置函数进行处理：

- `len(list)`：列表元素个数。
- `max(list)`：返回列表元素最大值。
- `min(list)`：返回列表元素最小值。
- `list(seq)`：将元组转换为列表。

`list`包含以下方法：

- `list.append(obj)`：在列表末尾添加新的对象。
- `list.count(obj)`：统计某个元素在列表中出现的次数。
- `list.extend(seq)`：在列表末尾一次性追加另一个序列中的多个值(用新列表扩展原来的列表)。
- `list.index(obj)`：从列表中找出某个值第一个匹配项的索引位置。
- `list.insert(index, obj)`：将对象插入列表。
- `list.pop(obj=list[-1])`：移除列表中的一个元素(默认最后一个元素)，并且返回该元素的值。
- `list.remove(obj)`：移除列表中某个值的第一个匹配项。
- `list.reverse()`：反转列表中元素。
- `list.sort([func])`：对原列表进行排序。
- `list.clear()`：清空列表。
- `list.copy()`：复制列表。

### 列表推导式

&emsp;&emsp;列表推导式提供了从序列创建列表的简单途径。通常应用程序将一些操作应用于某个序列的每个元素，用其获得的结果作为生成新列表的元素，或者根据确定的判定条件创建子序列。
&emsp;&emsp;每个列表推导式都在`for`之后跟一个表达式，然后有零至多个`for`或`if`子句。返回结果是一个根据表达从其后的`for`和`if`上下文环境中生成出来的列表。如果希望表达式推导出一个元组，就必须使用括号。

``` python
vec = [2, 4, 6]
[3 * x for x in vec]  # 结果为[6, 12, 18]
[[x, x ** 2] for x in vec]  # 结果为[[2, 4], [4, 16], [6, 36]]
```

&emsp;&emsp;下列是对序列里每一个元素逐个调用某种方法：

``` python
freshfruit = ['  banana', '  loganberry ', 'passion fruit  ']
# 结果为['banana', 'loganberry', 'passion fruit']
[weapon.strip() for weapon in freshfruit]
```

&emsp;&emsp;可以用`if`子句作为过滤器：

``` python
[3 * x for x in vec if x > 3]  # 结果为[12, 18]
[3 * x for x in vec if x < 2]  # 结果为[]
```

&emsp;&emsp;以下是一些关于循环和其它技巧的演示：

``` python
vec1 = [2, 4, 6]
vec2 = [4, 3, -9]
[x * y for x in vec1 for y in vec2]  # 结果为[8, 6, -18, 16, 12, -36, 24, 18, -54]
[x + y for x in vec1 for y in vec2]  # 结果为[6, 5, -7, 8, 7, -5, 10, 9, -3]
[vec1[i] * vec2[i] for i in range(len(vec1))]  # 结果为[8, 12, -54]
```

&emsp;&emsp;列表推导式可以使用复杂表达式或嵌套函数：

``` python
# 结果为['3.1', '3.14', '3.142', '3.1416', '3.14159']
[str(round(355 / 113, i)) for i in range(1, 6)]
```

&emsp;&emsp;列表推导式的执行顺序：各语句之间是嵌套关系，左边第二个语句是最外层，依次往右进一层，左边第一条语句是最后一层。

``` python
[x * y for x in range[1, 5] if x > 2 for y in range[1, 4] if x < 3]
```

它的执行顺序如下：

``` python
for x in range[1, 5]:
    if x > 2:
        for y in range[1, 4]:
            if x < 3:
                x * y
```

---

### 嵌套列表解析

&emsp;&emsp;以下实例展示了`3 * 4`的矩阵列表：

``` python
matrix = [
    [1, 2, 3, 4],
    [5, 6, 7, 8],
    [9, 10, 11, 12],
]
```

以下实例将`3 * 4`的矩阵列表转换为`4 * 3`列表：

``` python
# 结果为[[1, 5, 9], [2, 6, 10], [3, 7, 11], [4, 8, 12]]
[[row[i] for row in matrix] for i in range(4)]
```

也可以使用以下方法来实现：

``` python
transposed = []

for i in range(4):
    transposed.append([row[i] for row in matrix])

transposed  # 结果为[[1, 5, 9], [2, 6, 10], [3, 7, 11], [4, 8, 12]]
```

另外一种实现方法：

``` python
transposed = []

for i in range(4):
    # the following 3 lines implement the nested listcomp
    transposed_row = []

    for row in matrix:
        transposed_row.append(row[i])

    transposed.append(transposed_row)
​
transposed  # 结果为[[1, 5, 9], [2, 6, 10], [3, 7, 11], [4, 8, 12]]
```