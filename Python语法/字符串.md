---
title: 字符串
categories: Python语法
abbrlink: fc81fbfd
date: 2019-01-09 20:29:46
---
&emsp;&emsp;字符串有如下特性：<!--more-->

- `python`中单引号和双引号使用完全相同。
- 使用三引号(`'''`或`"""`)可以指定一个多行字符串。
- 转义符是`\`。
- 自然字符串是通过在字符串前加`r`或`R`，例如`r"this is a line with\n"`，则`\n`会显示，并不是换行。
- `python`可以处理`unicode`字符串，需要加上前缀`u`或`U`，例如`u"this is an unicode string"`。
- 字符串是不可变的。
- 按字面意义级联字符串，例如`"this " "is " "string"`会被自动转换为`this is string`。

``` python
word = '字符串'
sentence = "这是一个句子"
paragraph = """这是一个段落，
可以由多行组成"""
```

&emsp;&emsp;字符串的截取的语法格式如下：

``` python
变量[头下标:尾下标]
```

索引值以`0`为开始值，`-1`为从末尾的开始位置，`str[0:-1]`表示第一个到倒数第二个的所有字符。加号`+`是字符串的连接符，星号`*`表示复制当前字符串，紧跟的数字为复制的次数。
&emsp;&emsp;在终端输入：

``` python
str1 = "Good morning"
str1 * 2  # 结果为“Good morningGood morning”
str1[:6]  # 结果为“Good m”
str1[6]  # 结果为“o”
str1[:6] + "Happy" + str1[6:]  # 结果为“Good mHappyorning”
str1  # 结果为“Good morning”，str1并未改变
str1 = str1[:6] + "Happy" + str1[6:]
str1  # 结果为“Good mHappyorning”，str1已经被改变
```

常见的字符串方法如下：

- `capitalize`：把字符串的第一个字符改为大写。
- `casefold`：把整个字符串的所有字符改为小写。
- `center(width)`：将字符串居中，并使用空格填充至长度`width`的新字符串。
- `count(sub [, start [, end]])`：返回`sub`在字符串里边出现的次数，`start`和`end`是可选的，表示范围。
- `encode(encoding='utf-8', errors='strict')`：`以encoding`指定的编码格式对字符串进行编码。
- `endswith(sub [, start [, end]])`：检查字符串是否以`sub`子字符串结束，如果是返回`True`，否则返回`False`。start和end是可选的，表示范围。
- `expandtabs([tabsize=8])`：把字符串中的`tab`符号转换为空格，如果不指定参数，默认的空格数是`tabsize = 8`。
- `find(sub [, start [, end]])`：检测`sub`是否包含在字符串中，如果有则返回索引值，否则返回`-1`。`start`和`end`是可选的，表示范围。
- `index(sub [, start [, end]])`：和`find`方法一样，但如果`sub`不在`string`中，则会产生一个异常。
- `isalnum`：如果字符串至少有一个字符，并且所有字符都是字母或数字，就返回`True`，否则返回`False`。
- `isalpha`：如果字符串至少有一个字符，并且所有字符都是字母，就返回`True`，否则返回`False`。
- `isdecimal`：如果字符串只包含十进制数字，就返回`True`，否则返回`False`。
- `isdigit`：如果字符串只包含数字，就返回`True`，否则返回`False`。
- `islower`：如果字符串中至少包含一个区分大小写的字符，并且这些字符都是小写，则返回`True`，否则返回`False`。
- `isnumeric`：如果字符串中只包含数字字符，则返回`True`，否则返回`False`。
- `isspace`：如果字符串中只包含空格，则返回`True`，否则返回`False`。
- `istitle`：如果字符串是标题化(所有的单词都是以大写开始，其余字母均小写)，则返回`True`，否则返回`False`。
- `isupper`：如果字符串中至少包含一个区分大小写的字符，并且这些字符都是大写，则返回`True`，否则返回`False`。
- `join(sub)`：以字符串作为分隔符，插入到`sub`中所有的字符之间。
- `ljust(width)`：返回一个左对齐的字符串，并使用空格填充至长度为`width`的新字符串。
- `lower`：转换字符串中所有大写字符为小写。
- `lstrip`：去掉字符串左边的所有空格。
- `partition(sub)`：找到子字符串`sub`，把字符串分成一个`3`元组`(pre_sub, sub, fol_sub)`，如果字符串中不包含`sub`则返回`('原字符串', '', '')`。
- `replace(old, new [, count])`：把字符串中的`old`子字符串替换成`new`子字符串，如果`count`指定，则替换不超过`count`次。
- `rfind(sub [, start [, end]])`：类似于`find`方法，不过是从右边开始查找。
- `rindex(sub [, start [, end]])`：类似于`index`方法，不过是从右边开始。
- `rjust(width)`：返回一个右对齐的字符串，并使用空格填充至长度为`width`的新字符串。
- `rpartition(sub)`：类似于`partition`方法，不过是从右边开始查找。
- `rstrip`：删除字符串末尾的空格或换行符。
- `split(sep=None, maxsplit=-1)`：不带参数默认是以空格为分隔符切片字符串，如果`maxsplit`参数有设置，则仅分隔`maxsplit`个子字符串，返回切片后的子字符串拼接的列表。
- `splitlines(([keepends]))`：按照`\n`分隔，返回一个包含各行作为元素的列表，如果`keepends`参数指定，则返回前`keepends`行。
- `startswith(prefix[, start[, end]])`：检查字符串是否以`prefix`开头，是则返回`True`，否则返回`False`。`start`和`end`是可选的，指定检查范围。
- `strip([chars])`：删除字符串前边和后边所有的空格，`chars`参数可以定制删除的字符。
- `swapcase`：翻转字符串中的大小写。
- `title`：返回标题化(所有的单词都是以大写开始，其余字母均小写)的字符串。
- `translate(table)`：根据`table`的规则(可以由`str.maketrans('a', 'b')`定制)转换字符串中的字符。
- `upper`：转换字符串中的所有小写字符为大写。
- `zfill(width)`：返回长度为`width`的字符串，原字符串右对齐，前边用`0`填充。

``` python
str2 = "xiaoxie"
str2.capitalize()  # 结果为“Xiaoxie”
str2  # 结果为“xiaoxie”，注意这些方法并不改变字符串
str2.count("xi")  # 结果为“2”
```

&emsp;&emsp;字符串格式化符号含义：

符号 | 说明
-----|-----
`%c` | 格式化字符及其`ASCII`码
`%s` | 格式化字符串
`%d` | 格式化整数
`%o` | 格式化无符号八进制数
`%x` | 格式化无符号十六进制数
`%X` | 格式化无符号十六进制数(大写)
`%f` | 格式化定点数，可指定小数点后的精度
`%e` | 用科学计数法格式化定点数
`%E` | 作用同`%e`，用科学计数法格式化定点数
`%g` | 根据值的大小决定使用`%f`或`%e`
`%G` | 作用同`%g`，根据值的大小决定使用`%f`或者`%E`

&emsp;&emsp;格式化操作符辅助指令：

符号  | 说明
------|-----
`m.n` | `m`是显示的最小总宽度，`n`是小数点后的位数
`-`   | 用于左对齐
`+`   | 在正数前面显示加号`+`
`#`   | 在八进制数前面显示`0o`，在十六进制数前面显示`0x`或`0X`
`0`   | 显示的数字前面填充`0`取代空格

&emsp;&emsp;字符串转义字符含义：

符号 | 说明                | 符号 | 说明
-----|--------------------|------|----
`\'` | 单引号              | `\"` | 双引号
`\a` | 发出系统响铃声       | `\b` | 退格符
`\n` | 换行符              | `\t` | 横向制表符(`TAB`)
`\v` | 纵向制表符          | `\r` | 回车符
`\f` | 换页符              | `\o` | 八进制数代表的字符
`\x` | 十六进制数代表的字符 | `\0` | 表示一个空字符
`\\` | 反斜杠

&emsp;&emsp;在终端输入：

``` python
'\ta'  # 结果为“\ta”
print('\ta')  # 结果为“    a”
print('\\')  # 结果为“\”
"{{0}}".format("不打印")  # 结果为“{0}”
"{0:.1f}{1}".format(27.658, "GB")  # 结果为“27.7GB”
"%c" % 97  # 结果为“a”
"%c %c %c" % (97, 98, 99)  # 结果为“a b c”
"%s" % "I love you"  # 结果为“I love you”
"%d + %d = %d" % (4, 5, 4 + 5)  # 结果为“4 + 5 = 9”
"%o" % 10  # 结果为“12”
"%x" % 10  # 结果为“a”
"%X" % 10  # 结果为“A”
"%f" % 27.658  # 结果为“27.658000”
"%e" % 27.658  # 结果为“2.765800e+01”
"%E" % 27.658  # 结果为“2.765800E+01”
"%g" % 27.658  # 结果为“27.658”
"%5.1f" % 27.658  # 结果为“ 27.7”
"%.2e" % 27.658  # 结果为“2.77e+01”
"%10d" % 5  # 结果为“         5”
"%-10d" % 5  # 结果为“5         ”
"%+d" % 5  # 结果为“+5”
"%#o" % 10  # 结果为“0o12”
"%#X" % 10  # 结果为“0XA”
"%+d" % -5  # 结果为“-5”
"%#d" % 10  # 结果为“10”
"%010d" % 5  # 结果为“0000000005”
"%-010d" % 5  # 结果为“5         ”
```

&emsp;&emsp;`format`格式如下：

``` python
"{} love {} {}".format("I", "you", "xinzi")  # 得到“I love you xinzi”
"{0} love {1} {2}".format("I", "you", "xinzi")  # 得到“I love you xinzi”
"{a} love {b} {c}".format("I", "you", "xinzi")  # 结果为“出错”
"{a} love {b} {c}".format(a="I", b="you", c="xinzi")  # 结果为“I love you xinzi”
"{0} love {b} {c}".format("I", b="you", c="xinzi")  # 结果为“I love you xinzi”
"{a} love {b} {0}".format(a="I", b="you", "xinzi")  # 结果为“出错”
```

&emsp;&emsp;分割字符串如下：

``` python
str = 'a,b,c,d'
strlist = str.split(',')  # 用逗号分割str字符串，并保存到列表

for value in strlist:  # 循环输出列表值
    print(value, end=" ")  # 输出“a b c d”
```

&emsp;&emsp;`join`方法用于将序列中的元素以指定的字符连接生成一个新的字符串：

``` python
str.join(sequence)
```

参数`sequence`是要连接的元素序列。

``` python
s1 = "-"
s2 = ""
seq = ("r", "u", "n", "o", "o", "b")  # 字符串序列
print(s1.join(seq))  # 输出“r-u-n-o-o-b”
print(s2.join(seq))  # 输出“runoob”
```

&emsp;&emsp;`maketrans`方法用于给`translate`方法创建字符映射转换表。一般情况下，`maketrans`方法需要配合`translate`方法一起使用。
&emsp;&emsp;该方法可以只接受一个参数，此时这个参数是个字典类型；对于接受两个参数的最简单的调用方式，第一个参数是字符串，表示需要转换的字符，第二个参数也是字符串，表示转换的目标，两个字符串的长度必须相同，为一一对应的关系；在`Python 3`中可以有第三个参数，表示要删除的字符，也是字符串。
&emsp;&emsp;`Python 3.4`以后已经不需要从外部`string`模块中来调用`maketrans`方法了，取而代之的是内建函数，即`bytearray.maketrans`、`bytes.maketrans`和`str.maketrans`。
&emsp;&emsp;`Python 3`中的语法如下：

``` python
str.maketrans(intab, outtab[, delchars])
```

`Python 2`中的语法如下：

``` python
import string
string.maketrans(intab, outtab)
```

- `intab`：需要转换的字符组成的字符串。
- `outtab`：转换的目标字符组成的字符串。
- `delchars`：可选参数，表示要删除的字符组成的字符串。

该方法返回一个字符映射转换表，以供`translate`方法调用。

``` python
intab = "aeiou"
outtab = "12345"
deltab = "thw"
​
trantab1 = str.maketrans(intab, outtab)  # 创建字符映射转换表
trantab2 = str.maketrans(intab, outtab, deltab)  # 创建字符映射转换表，并删除指定字符
test = "this is string example....wow!!!"
print(test.translate(trantab1))
print(test.translate(trantab2))
```

执行结果：

``` python
th3s 3s str3ng 2x1mpl2....w4w!!!
3s 3s sr3ng 2x1mpl2....4!!!
```

&emsp;&emsp;字符串反转函数如下：

``` python
def reverse(s):
    return s[::-1]
​
print(reverse("hello"))  # 输出“olleh”
```

&emsp;&emsp;关于字符串的比较：先比较两个对象的第`0`个元素，大小关系即为对象的大小关系。如果相等则继续比较后续元素，先终止迭代的则认为是小的。