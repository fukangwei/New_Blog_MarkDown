---
title: 模块和包
date: 2019-01-12 09:24:26
categories: Python语法
---
### 模块

&emsp;&emsp;容器是数据的封装，函数是语句的封装，类是方法和属性的封装，模块是模块就是程序。
&emsp;&emsp;在使用模块时，要注意命名空间。在`hi.py`中输入：

``` python
def hello():
    print("hello")
```

在终端输入：

``` python
import hi
hi()  # 结果将会报错
hi.hello()  # 结果为“hello”
```

&emsp;&emsp;导入模块的三个方法：

``` python
import 模块名
from 模块名 import 函数名
import 模块名 as 新名字
```

&emsp;&emsp;在`Temp.py`中输入：

``` python
def c2f(cel):
    fah = cel * 1.8 + 32
    return fah
​
def f2c(fah):
    cel = (fah - 32) / 1.8
    return cel
```

在`clac.py`中输入：

``` python
import Temp
​
print("32摄氏度 = %.2f华氏度" % Temp.c2f(32))
print("99华氏度 = %.2f摄氏度" % Temp.f2c(99))
# --------------------------
from Temp import c2f, f2c  # 写成“from Temp import *”也是可以的，但不推荐
​
print("32摄氏度 = %.2f华氏度" % c2f(32))
print("99华氏度 = %.2f摄氏度" % f2c(99))
# --------------------------
import Temp as tc
​
print("32摄氏度 = %.2f华氏度" % tc.c2f(32))
print("99华氏度 = %.2f摄氏度" % tc.f2c(99))
```

注意，模块文件要放在与源文件一样的路径下！

### if \_\_name\_\_ == '__main__'

&emsp;&emsp;在`Temp.py`中输入：

``` python
def c2f(cel):
    fah = cel * 1.8 + 32
    return fah
​
def f2c(fah):
    cel = (fah - 32) / 1.8
    return cel
​
def test():
    print("0摄氏度 = %.2f华氏度" % c2f(0))
    print("0华氏度 = %.2f摄氏度" % f2c(0))
​
test()
```

在`calc.py`中输入：

``` python
import Temp as tc
​
print("32摄氏度 = %.2f华氏度" % tc.c2f(32))
print("99华氏度 = %.2f摄氏度" % tc.f2c(99))
```

执行结果：

``` python
0摄氏度 = 32.00华氏度
0华氏度 = -17.78摄氏度
32摄氏度 = 89.60华氏度
99华氏度 = 37.22摄氏度
```

有时候我们希望模块中的测试程序只有在测试模块时被执行，在模块加载进执行应用程序时不被执行，可以加上：

``` python
if __name__ == "__main__":
```

于是模块文件可以改为：

``` python
if __name__ == "__main__":
    test()
```

在执行应用程序时，在终端输入：

``` python
__name__  # 结果为“__main__”
tc.__name__  # 结果为“Temp”
```

在执行模块程序时，在终端输入：

``` python
__name__  # 结果为'__main__'
```

即执行哪个程序，那一个程序的`name`为`main`。

### 包

&emsp;&emsp;创建`包`(`package`)的方法：创建一个文件夹，用于存放相关的模块，文件夹的名字就是包的名字；在文件夹中创建一个`__init__.py`的模块文件，内容可以为空。
&emsp;&emsp;具体使用方法：在当前文件夹下创建一个文件夹`M1`，把`Temp.py`放入`M1`文件夹，并在`M1`文件夹中创建一个空文件`__init__.py`。把应用程序改为：

``` python
import M1.Temp as tc
​
print("32摄氏度 = %.2f华氏度" % tc.c2f(32))
print("99华氏度 = %.2f摄氏度" % tc.f2c(99))
```