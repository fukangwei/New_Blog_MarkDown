---
title: 成员对象
categories: C++语法详解
abbrlink: b0227a3d
date: 2019-02-05 19:25:38
---
&emsp;&emsp;当一个类的成员是另一个类的对象时，这个对象就叫成员对象。概括的说，就是一个类的成员是一个对象，即成员对象。<!--more-->

``` cpp
#include<iostream>
​
using namespace std;
​
class Date {
    /* ... */
};
​
class Time {
    /* 创建一个对象Time，该对象有两个数据成员d1
       和d2，这两个成员是Date类的两个对象 */
    Date d1, d2;
};
```

在这个例子中，`Time`的成员`d1`和`d2`是`Date`的对象，那么`d1`和`d2`就是成员对象。
&emsp;&emsp;出现成员对象时，该类的构造函数要包含对成员的初始化。如果构造函数的成员初始化列表没有对成员对象初始化时，则使用成员对象的缺省构造函数。如上例中的`Time`中，有两个成员对象`d1`和`d2`，那么在`Time`类的构造函数中，就应该包含对`d1`和`d2`的初始化，这个初始化通常采用成员初始化列表的方式进行。
&emsp;&emsp;构造函数对成员对象初始化列表的格式为：

``` cpp
< 类名 > :: < 类名 > ( < 总参数表 > ) : < 成员对象1 > ( < 形参表1 > ), ... {
    /* 函数体 */
}
```

如上例的`Time`类的构造函数可以这样定义：

``` cpp
/* 如果在类体内定义，则省略“<Time>::” */
<Time>::<Time> ( int m ) : d1 ( m ), d2 ( 5 ) {
}
```

该例中`d1`被初始化为`d1(m)`，`d2`被初始化为`d2(5)`。再如：

``` cpp
/* 如果在类体内定义，则省略“<Time>::” */
<Time>::<Time> ( int m ) : d1 ( m ) {
}
```

该例中`d1`被初始化为`d1(m)`，`d2`未被初始化。
&emsp;&emsp;建立一个类的对象时，应先调用其构造函数。但是如果这个类有成员对象，则要先执行成员对象自己所属类的构造函数，当全部成员对象都执行了自身类的构造函数后，再执行当前类的构造函数。上例修改如下：

``` cpp
#include <iostream>
​
using namespace std;
​
class Date {
public:
    Date() {
        cout << "This is Date" << endl; /* Date的缺省构造函数 */
    }
​
    Date ( int A ) {
        cout << "The value = " << A << endl;
    }
};
​
class Time {
public:
    Time() {
        cout << "This is Time" << endl; /* Time的缺省构造函数 */
    }

    /* Time的构造函数。采用成员初始化列表的方式，成员对象d1未初始化，成员对象d2初始化为A */
    Time ( int A ) : d2 ( A ) {
        cout << "Hello!" << endl;
    }

private:
    /* 在Time中声明两个数据成员d1和d2，这两个成员是Date类的两个对象，即d1和d2是成员对象 */
    Date d1, d2;
};
​
int main() {
    Time t1, t2 ( 6 );
    cout << "The end" << endl;
}
```

主程序运行到`Time t1, t2(6)`时，会检查`Time`类中是否有成员对象。检查中发现有成员对象`d1`和`d2`，就先执行`d1`和`d2`对应的`Date`类中的构造函数，然后再执行`Time`中的构造函数。
&emsp;&emsp;在创建`t1`对象(`无参数`)时，按下列步骤进行：

- 执行`d1`所属类`Date`的构造函数，因为`d1`在`Time`中未初始化，故在重载时调用缺省构造函数，输出`This is Date`。
- 执行`d2`所属类`Date`的构造函数，因为`d2`在`Time`中未初始化，故在重载时调用缺省构造函数，输出`This is Date`。
- 执行`t1`所属类`Time`的构造函数，因为`t1`在`Time`中未初始化，故在重载时调用缺省构造函数，输出`This is time`。

&emsp;&emsp;在创建`t2`对象(`有参数`)时，按下列步骤进行：

- 执行`d1`所属类`Date`的构造函数，因为`d1`在`Time`中未初始化，故在重载时调用缺省构造函数，输出`This is Date`。
- 执行`d2`所属类`Date`的构造函数，根据`Time`中`Time(int A):d2(A);`，发现`d2`已经被初始化为`d2(A)`，在这里即为`d2(6)`，由此则需要调用`Date`类的构造函数`Date(int A)`，输出`The value = 6`。
- 执行`t2`所属类`Time`的构造函数，`t2`的重载函数应为`Time(int A)`，输出`Hello`。

&emsp;&emsp;**补充说明**：如果一个类中包含多个成员对象，成员对象的构造函数的调用顺序由它们在类中的说明顺序决定，而与它们在初始化表中的顺序无关。