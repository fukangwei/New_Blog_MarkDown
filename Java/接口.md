---
title: 接口
categories: Java
date: 2018-12-24 20:32:20
---
&emsp;&emsp;接口(`Interface`)在`Java`中是一种抽象类型，是抽象方法的集合，通常以`interface`来声明。一个类通过继承接口的方式，从而来继承接口的抽象方法。<!--more-->
&emsp;&emsp;接口并不是类，编写接口的方式和类很相似，但是它们属于不同的概念。类描述对象的属性和方法，接口则包含类要实现的方法。除非实现接口的类是抽象类，否则该类要定义接口中的所有方法。
&emsp;&emsp;接口与类相似点：

- 接口文件保存在`.java`结尾的文件中，文件名使用接口名。
- 接口的字节码文件保存在`.class`结尾的文件中。
- 接口相应的字节码文件必须在与包名称相匹配的目录结构中。

&emsp;&emsp;接口与类的区别：

- 接口不能用于实例化对象。
- 接口没有构造方法。
- 接口中所有的方法必须是抽象方法。
- 接口不能包含成员变量，除了`static`和`final`变量。
- 接口不是被类继承了，而是要被类实现。
- 接口支持多继承。

&emsp;&emsp;接口特性：

- 接口中每一个方法也是隐式抽象的，接口中的方法会被隐式的指定为`public abstract`(只能是`public abstract`，其他修饰符都会报错)。
- 接口中可以含有变量，但是接口中的变量会被隐式的指定为`public static final`变量(只能是`public`，用`private`修饰会报编译错误)。
- 接口中的方法是不能在接口中实现的，只能由实现接口的类来实现。

&emsp;&emsp;抽象类和接口的区别：

- 抽象类中的方法可以有方法体(就是能实现方法的具体功能)，但是接口中的方法不行。
- 抽象类中的成员变量可以是各种类型的，而接口中的成员变量只能是`public static final`类型的。
- 接口中不能含有静态代码块以及静态方法(用`static`修饰的方法)，而抽象类是可以有静态代码块和静态方法。
- 一个类只能继承一个抽象类，而一个类却可以实现多个接口。

### 接口的声明

&emsp;&emsp;接口的声明语法格式如下：

```` java
[可见度] interface 接口名称 [extends 其他的类名] {
    /* 声明变量 */
    /* 抽象方法 */
}
````

`Interface`关键字用来声明一个接口，下面是接口声明的一个简单例子：

``` java
import java.lang.*; /* 引入包 */

public interface NameOfInterface {
    /* 任何类型的final、static变量 */
    /* 抽象方法 */
}
```

代码如下：

``` java
interface Animal {
    public void eat();
    public void travel();
}
```

### 接口的实现

&emsp;&emsp;当类实现接口的时候，必须要实现接口中所有的方法，否则类必须声明为抽象的类。类使用`implements`关键字实现接口。在类声明中，`Implements`关键字放在`class`声明后面：

``` java
public class TestDog implements Animal {
    public void eat() {
        System.out.println("Mammal eats");
    }

    public void travel() {
        System.out.println("Mammal travels");
    }

    public int noOfLegs() { /* 可以有自己的方法 */
        return 0;
    }

    public static void main(String args[]) {
        TestDog m = new TestDog();
        m.eat();
        m.travel();
    }
}
```

执行结果：

``` java
Mammal eats
Mammal travels
```

&emsp;&emsp;重写接口中声明的方法时，需要注意以下规则：

- 类在实现接口的方法时，不能抛出强制性异常，只能在接口中，或者继承接口的抽象类中抛出该强制性异常。
- 类在重写方法时要保持一致的方法名，并且应该保持相同或者相兼容的返回值类型。
- 如果实现接口的类是抽象类，那么就没必要实现该接口的方法。

&emsp;&emsp;在实现接口的时候，也要注意一些规则：

- 一个类只能继承一个类，但是能实现多个接口。
- 一个接口能继承另一个接口，这和类之间的继承比较相似。

### 接口的继承

&emsp;&emsp;一个接口能继承另一个接口，和类之间的继承方式比较相似。接口的继承使用`extends`关键字，子接口继承父接口的方法。下面的`Sports`接口被`Hockey`接口继承：

``` java
public interface Sports {
    public void setHomeTeam(String name);
    public void setVisitingTeam(String name);
}

/* Hockey.java */
public interface Hockey extends Sports {
    public void homeGoalScored();
    public void visitingGoalScored();
    public void endOfPeriod(int period);
    public void overtimePeriod(int ot);
}
```

`Hockey`接口自己声明了四个方法，从`Sports`接口继承了两个方法，这样的话，实现`Hockey`接口的类需要实现六个方法。

### 接口的多继承

&emsp;&emsp;在`Java`中，类的多继承是不合法，但接口允许多继承。在接口的多继承中，`extends`关键字只需要使用一次，在其后跟着继承接口：

``` java
public interface Hockey extends Sports, Event
```

### 标记接口

&emsp;&emsp;最常用的继承接口是没有包含任何方法的接口。标记接口是没有任何方法和属性的接口，它仅仅表明它的类属于一个特定的类型，供其他代码来测试允许做一些事情。例如`java.awt.event`包中的`MouseListener`接口继承的`java.util.EventListener`接口定义如下：

``` java
package java.util;

public interface EventListener {
    /* code */
}
```

&emsp;&emsp;标记接口主要用于以下两种目的：
&emsp;&emsp;1. 建立一个公共的父接口：正如`EventListener`接口，这是由几十个其他接口扩展的`Java API`，你可以使用一个标记接口来建立一组接口的父接口。例如当一个接口继承了`EventListener`接口，`Java`虚拟机就知道该接口将要被用于一个事件的代理方案。
&emsp;&emsp;2. 向一个类添加数据类型：这种情况是标记接口最初的目的，实现标记接口的类不需要定义任何接口方法(因为标记接口根本就没有方法)，但是该类通过多态性变成一个接口类型。