---
title: Perl特殊变量
date: 2018-12-18 09:41:00
categories: Perl
---
&emsp;&emsp;`Perl`定义了一些特殊的变量，通常以`$`、`@`或`%`作为前缀，例如`$_`。很多特殊的变量有一个很长的英文名，例如操作系统变量`$!`可以写为`$OS_ERROR`。如果你想使用英文名的特殊变量，则需要在程序头部添加`use English;`。
&emsp;&emsp;最常用的特殊变量为`$_`，该变量包含了默认输入和模式匹配内容：

``` perl
foreach ( 'Google', 'Runoob', 'Taobao' ) {
    print $_;
    print "\n";
}
```

执行结果：

``` bash
Google
Runoob
Taobao
```

以下实例不使用`$_`来输出内容：

``` perl
foreach ( 'Google', 'Runoob', 'Taobao' ) {
    print;
    print "\n";
}
```

&emsp;&emsp;在迭代循环中，当前循环的字符串会放在`$_`中，然后通过`print`输出。另外`print`在不指定输出变量时，默认情况下使用的也是`$_`。

### 特殊变量类型

&emsp;&emsp;根据特殊的变量的使用性质，可以分为以下几类：

- 全局标量特殊变量
- 全局数组特殊变量
- 全局哈希特殊变量
- 全局特殊文件句柄
- 全局特殊常量
- 正则表达式特殊变量
- 文件句柄特殊变量

&emsp;&emsp;全局标量特殊变量如下：

全局标量                              | 说明
-------------------------------------|--------
`$_`、`$ARG`                         | 默认输入和模式匹配内容
`$.`、`$NR`                          | 前一次读的文件句柄的当前行号
`$/`、`$RS`                          | 输入记录分隔符，默认是新行字符
`$,`、`$OFS`                         | 输出域分隔符
`$\`、`$ORS`                         | 输出记录分隔符
`$"`、`$LIST_SEPARATOR`              | 该变量和`$,`类似，但应用于向双引号引起的字符串(或类似的内插字符串)中内插数组和切片值的场合，默认为一个空格
`$;`、`$SUBSCRIPT_SEPARATOR`         | 在仿真多维数组时使用的分隔符，默认为`\034`
`$^L`、`$FORMAT_FORMFEED`            | 发送到输出通道的走纸换页符，默认为`\f`
`$^A`、`$ACCUMULATOR`                | 打印前用于保存格式化数据的变量
`$?`、`$CHILD_ERROR`                 | 返回上一个外部命令的状态
`$!`、`$OS_ERROR`、`$ERRNO`          | 这个变量的数字值是`errno`的值，字符串值是对应的系统错误字符串
`$@`、`$EVAL_ERROR`                  | 命令`eval`的错误消息。如果为空，则表示上一次`eval`命令执行成功
`$$`、`$PROCESS_ID`、`$PID`          | 运行当前`Perl`脚本程序的进程号
`$<`、`$REAL_USER_ID`、`$UID`        | 当前进程的实际用户号
`$>`、`$EFFECTIVE_USER_ID`、`$EUID`  | 当前进程的有效用户号
`$(`、`$REAL_GROUP_ID`、`$GID`       | 当前进程的实际组用户号
`$)`、`$EFFECTIVE_GROUP_ID`、`$EGID` | 当前进程的有效组用户号
`$0`、`$PROGRAM_NAME`                | 包含正在执行的脚本的文件名
`$[`                                 | 数组的数组第一个元素的下标，默认是`0`
`$]`、`$PERL_VERSION`                | `Perl`的版本号
`$^D`、`$DEBUGGING`                  | 调试标志的值
`$^E`、`$EXTENDED_OS_ERROR`          | 在`非UNIX`环境中的操作系统扩展错误信息
`$^H`                                | 由编译器激活的语法检查状态
`$^M`                                | 备用内存池的大小
`$^O`、`$OSNAME`                     | 操作系统名
`$^W`、`$WARNING`                    | 警告开关的当前值
`$^X`、`$EXECUTABLE_NAME`            | `Perl`二进制可执行代码的名字
`$ARGV`                              | 从默认的文件句柄中读取时的当前文件名

&emsp;&emsp;全局数组特殊变量如下：

全局数组 | 说明
--------|-----
`@ARGV` | 传给脚本的命令行参数列表
`@INC`  | 在导入模块时需要搜索的目录列表
`@F`    | 命令行的数组输入

&emsp;&emsp;全局哈希特殊变量如下：

全局哈希 | 说明
--------|-----
`%INC`  | 散列表`%INC`包含所有用`do`或`require`语句包含的文件。关键字是文件名，值是这个文件的路径
`%ENV`  | 包含当前环境变量
`%SIG`  | 信号列表及其处理方式

&emsp;&emsp;全局特殊文件句柄如下：

特殊文件句柄 | 说明
------------|-----
`ARGV`      | 遍历数组变量`@ARGV`中的所有文件名的特殊文件句柄
`STDERR`    | 标准错误输出句柄
`STDIN`     | 标准输入句柄
`STDOUT`    | 标准输出句柄
`_`         | 特殊的文件句柄用于缓存文件信息(`fstat`、`stat`和`lstat`)

&emsp;&emsp;全局特殊常量如下：

特殊变量       | 说明
--------------|-----
`__END__`     | 脚本的逻辑结束，忽略后面的文本
`__FILE__`    | 当前文件名
`__LINE__`    | 当前行号
`__PACKAGE__` | 当前包名，默认的包名是`main`

&emsp;&emsp;正则表达式特殊变量如下：

特殊变量                       | 说明
------------------------------|------
`$n`                          | 包含上次模式匹配的第`n`个子串
`$&`、`$MATCH`                | 前一次成功模式匹配的字符串
<code>$\`</code>、`$PREMATCH` | 前一次匹配成功的子串之前的内容
`$'`、`$POSTMATCH`            | 前一次匹配成功的子串之后的内容
`$+`、`$LAST_PAREN_MATCH`     | 与上个正则表达式搜索格式匹配的最后一个括号

&emsp;&emsp;文件句柄特殊变量如下：

文件句柄特殊变量                            | 说明
------------------------------------------|-----
<code>$&#124;</code>、`$OUTPUT_AUTOFLUSH` | 如果设置为`0`，在每次调用函数`write`或`print`后，自动调用函数`fflush`，将所写内容写回文件
`$%`、`$FORMAT_PAGE_NUMBER`               | 当前输出页号
`$=`、`$FORMAT_LINES_PER_PAGE`            | 当前每页长度，默认为`60`
`$-`、`$FORMAT_LINES_LEFT`                | 当前页剩余的行数
`$~`、`$FORMAT_NAME`                      | 当前报表输出格式的名称，默认值是文件句柄名
`$^`、`$FORMAT_TOP_NAME`                  | 当前报表输出表头格式的名称，默认值是带后缀`_TOP`的文件句柄名